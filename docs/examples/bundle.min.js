var a11yDatepicker=function(){"use strict";function e(e,t){var n=new Date(e.getTime());return n.setHours(0,0,0,0),n.setDate(1),n.setMonth(n.getMonth()+t),n}function t(e,t){return function e(t,n){n||(n=[]);return 7===n.length?n:(n.push(t),e(6===t?0:t+1,n))}(t).indexOf(e.getDay())}function n(e,t){var n=new Date(e.getTime());return new Date(n.setDate(n.getDate()+t))}function a(e){return new Date(e[0],e[1],e[2])}function r(e,t,n){return n||(n=[]),n.push(e),e<t&&r(e+1,t,n)||n}function i(e,t,n){var a=document.createElement("th"),r=document.createElement("button");return r.type="button",r.value=t+"$"+n,"prev"===e?(r.setAttribute("data-ad-id","-1"),r.appendChild(document.createTextNode("<"))):(r.setAttribute("data-ad-id","1"),r.appendChild(document.createTextNode(">"))),a.appendChild(r),a}function d(e,t,n,r){return function(i,d){var o=document.createElement("td"),u=a([t,e,i]);return o.appendChild(function(e,t,n,a,r,i){var d=document.createElement("button"),o=document.createTextNode(e);return d.value=n+"$"+t+"$"+e,d.type="button",d.setAttribute("data-day",!0),d.setAttribute("data-ad-id",""+e+t+n),d.setAttribute("aria-label",r+" "+e+" "+a+" "+n),d.setAttribute("aria-disabled",!i),d.appendChild(o),d}(i,e,t,n,d,r(u))),o}}function o(e,t,n){for(var a=document.createElement("tr"),r=e,i=0;i<7;i++)a.appendChild(t(r,n.weekdays[i])),r+=1;return{el:a,day:r}}function u(e,t){var n=e.split(t);return n.forEach((function(e,t){e.indexOf("d")>-1&&(n[t]="day"),e.indexOf("m")>-1&&(n[t]="month"),e.indexOf("y")>-1&&(n[t]="year")})),n}function c(e){return function(t,n){return t[e.indexOf(n)]}}function l(e){var t;return e.indexOf(".")>-1&&(t="."),e.indexOf("-")>-1&&(t="-"),e.indexOf("/")>-1&&(t="/"),t}function m(e,t){var n=l(t),a=u(t,n),r=e.split(n),i=c(a);return new Date(i(r,"year"),i(r,"month")-1,i(r,"day"))}function f(e,t){var n=l(t),a=t.split(n),r=e.getFullYear(),i=e.getMonth()+1,d=e.getDate();return a.map((function(e){return e.match(/d/i)?s(d,e):e.match(/m/i)?s(i,e):e.match(/y/i)?s(r,e):void 0})).join(n)}function s(e,t){var n=(t+"").length-(e+"").length;if(0===n)return e;if(n>0)return function(e,t){for(var n=e+"",a=0;a<t;a++)n=0+n;return n}(e,n);if(n<0)throw new Error("Invalid date format")}function p(e){return a(e.value.split("$").map((function(e){return parseInt(e)})))}function h(e){return e instanceof Date&&!isNaN(e)}function v(e,t,n,a){var r=t&&(h(t)&&t||m(t,a)),i=n&&(h(n)&&n||m(n,a)),d=h(e)&&e||m(e,a);return(!r||r<=d)&&(!i||i>=d)}function g(e,n,r,u){var c,l,m,f,s,p=e.getFullYear(),h=e.getMonth(),g=e.toLocaleDateString(u.locale,{month:"long"}),y=t(e,u.weekStartsOn),D=a([p,h+1,0]).getDate(),C=d(h,p,g,(c=u.minDate,l=u.maxDate,m=u.dateFormat,function(e){return v(e,c,l,m)})),w=document.createElement("table"),b=document.createElement("thead");b.appendChild(function(e,t,n,a,r){var d=document.createElement("tr"),o=document.createElement("th"),u=(a&&r?5:(a||r)&&6)||7;if(o.colSpan=u,o.appendChild(document.createTextNode(n+" "+e)),a){var c=i("prev",e,t);d.appendChild(c)}if(d.appendChild(o),r){var l=i("next",e,t);d.appendChild(l)}return d}(p,h,g,n,r)),b.appendChild((f=u.weekdays,s=document.createElement("tr"),f.forEach((function(e){var t=document.createTextNode(e),n=document.createElement("th");n.appendChild(t),s.appendChild(n)})),s)),w.appendChild(b);var E=function(e,t,n){for(var a=e,r=document.createDocumentFragment(),i=1,d=a;d<7;d++)r.appendChild(t(i,n.weekdays[i])),i+=1;var o=document.createDocumentFragment();for(d=0;d<e;d++){var u=document.createElement("td");o.appendChild(u)}let c=document.createElement("tr");return c.appendChild(o),c.appendChild(r),{el:c,end:i}}(y,C,u);return w.appendChild(E.el),w.appendChild(function(e,t,n,a){for(var r=Math.floor((t-e+1)/7),i=e,d=document.createDocumentFragment(),u=0;u<r;u++){var c=o(i,n,a);d.appendChild(c.el),i=c.day}if(i<=t){var l=document.createElement("tr"),m=0;for(u=i;u<=t;u++)l.appendChild(n(i,a.weekdays[m])),i+=1,m+=1;var f=document.createDocumentFragment();for(u=0;u<7-m;u++){var s=document.createElement("td");f.appendChild(s)}l.appendChild(f),d.appendChild(l)}return d}(E.end,D,C,u)),w}function y(t,n,a){var i=r(a.monthsBeforeCurrent,a.monthsAfterCurrent).length,d=n<0?-1*i:i,o=d<0?0:i-1,u=d<0?i-1:0;return{date:e(t,d),before:-1*o,after:u}}function D(e){return e.focus(),!0}function C(){return document.activeElement}function w(e){return document.querySelector('[data-ad-id="'+e+'"]')}function b(e){return w(""+e.getDate()+e.getMonth()+e.getFullYear())}function E(e,t,n){return t.addEventListener(e,n,!0),function(){t.removeEventListener(e,n,!0)}}function k(e){return e.hasAttribute("data-day")}function x(t,n,a,i,d){i=i||a.monthsBeforeCurrent,d=d||a.monthsAfterCurrent,F(t,a.id),function(t,n,a,i,d){var o=r(i,d),u=document.createElement("div");o.forEach((function(t,r){var i=void 0===o[r-1],d=void 0===o[r+1],c=e(n,t);u.appendChild(g(c,i,d,a))})),u.setAttribute("data-ad-id",a.id+"group"),t.appendChild(u)}(t,n,a,i,d)}function F(e,t){var n=w(t+"group");n&&e.removeChild(n)}function T(e,t,n,a){var r=m(n,a);max=f(r,"yyyy-mm-dd"),e.setAttribute(t,r)}function A(e,t,a){var r=p(C()),i=n(r,e),d=b(i);d&&D(d)||function(e,t,n,a){var r=y(n,t>0?1:-1,a);return x(e,r.date,a,r.before,r.after),!0}(t,e,r,a)&&D(b(i))}var N={39:function(e,t,n){"day"===t&&A(1,e.currentTarget,n)},37:function(e,t,n){"day"===t&&A(-1,e.currentTarget,n)},38:function(e,t,n){"day"===t&&A(-7,e.currentTarget,n)},40:function(e,t,n){"day"===t&&A(7,e.currentTarget,n)},27:function(e,t,n){D(w(n.id+"input")),F(e.currentTarget,n.id)},"40shift":function(e,t,n,a){!function(e,t,n){var a=n||t.initialDate&&m(t.initialDate,t.dateFormat)||new Date;x(e,a,t),D(b(a))}(e.currentTarget,n,a)}};function O(e,t,n){function r(e){e.target.hasAttribute("data-direction")&&e.preventDefault()}function i(a){var r,i,d,o,f,s=a.target,p=(r=s.value,i=e.dateFormat,d=l(i),o=c(u(i,d)),!(3!==(f=(f=r.split(d)).map((function(e){return parseInt(e)}))).length||o(f,"month")>12||o(f,"month")<1||!h(new Date(o(f,"year"),o(f,"month")-1,o(f,"day"))))&&v(s.value,e.minDate,e.maxDate,e.dateFormat)&&m(s.value,e.dateFormat));p?(t("selectedDate",p),x(s.parentNode,n("selectedDate"),e),s.setCustomValidity("")):s.setCustomValidity("invalid date")}function d(t){t.relatedTarget&&t.relatedTarget.getAttribute("data-ad-id")||F(t.currentTarget.parentNode,e.id)}function o(t){""!==t.target.value&&"click"!==t.type||w(e.id+"group")||(x(t.target.parentNode,n("selectedDate")||e.initialDate&&m(e.initialDate,e.dateFormat)||new Date,e),w(e.id+"group").scrollIntoView())}function s(n){var r=n.target,i=w(e.id+"input");k(r)&&function(n,a){var r=p(n);v(r,e.minDate,e.maxDate,e.dateFormat)&&(a.value=f(r,e.dateFormat),t("selectedDate",r),F(a.parentNode,e.id),a.setCustomValidity(""),a.focus())}(r,i),function(e){var t=e.getAttribute("data-ad-id");return"1"===t||"-1"===t}(r)&&function(t){var n=t.currentTarget,r=parseInt(t.target.getAttribute("data-ad-id")),i=t.target.value.split("$"),d=y(i=a([i[0],i[1],1]),r,e);x(n,d.date,e,d.before,d.after)}(n)}function g(t){var a=k(C())?"day":null,r=t.shiftKey?t.which+"shift":t.which;N[r]&&N[r](t,a,e,n("selectedDate"))}this.setListeners=function(e,t){E("focus",t,o),E("click",e,s),E("keydown",e,g),E("input",t,i),E("click",t,o),E("blur",t,d),E("mousedown",e,r)}}function S(e,t){var n=I({},e);return n=I(n,t)}function I(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}var L={locale:"en-EN",weekDayFormat:"short",minDate:null,maxDate:null,initialDate:null,monthsBeforeCurrent:0,monthsAfterCurrent:0,weekStartsOn:1,id:"_ad-",dateFormat:"yyyy-mm-dd"},P={description:"This is a datepicker. You can type in a date using the keyboard. Use the required date format. It should be:"+L.dateFormat+" You can also use the datepicker to select a date. Press shift and arrow down to focus the datepicker. Press left arrow to move one day back. Press right arrow to move one day ahead. Press arrow up to move one week back.  Press arrow down to move one week ahead Press Space to select a date. Press Escape to close the datepicker.",notInRange:"The date is not within the intended date range.",nextGroups:"Show next months.",prevGroups:"Show previous months."};return function(e,t){var r={selectedDate:null};!function(e,t,r,i){var d,o=S(L,e||{});o.translations=S(P,t||{}),o.monthsBeforeCurrent=-1*o.monthsBeforeCurrent,o.weekdays=function e(t,a,r,i){return i||(i=[]),7===i.length?i:(i.push(t.toLocaleDateString(a,{weekday:r})),e(n(t,1),a,r,i))}((d=o.weekStartsOn,n(a([2014,10,9]),d)),o.locale,o.weekDayFormat);var u=document.getElementById(o.id+"datepicker");if(navigator.userAgent.match(/mobi/gi))!function(e,t){var n=document.createElement("input");n.type="date",t.maxDate&&T(n,"max",t.maxDate,t.dateFormat),t.minDate&&T(n,"min",t.minDate,t.dateFormat),e.appendChild(n)}(u,o);else{var c=function(e,t){var n=document.createElement("p");n.appendChild(document.createTextNode(t.translations.description)),n.classList.add("visuallyhidden"),n.id=t.id+n,e.appendChild(n);var a=document.createElement("input");return a.setAttribute("aria-describedby",t.id+"description"),a.type="text",a.setAttribute("data-ad-id",t.id+"input"),e.appendChild(a),a}(u,o);new O(o,r,i).setListeners(u,c)}}(e,t,(function(e,t){r[e]=t}),(function(e){return r[e]}))}}();
