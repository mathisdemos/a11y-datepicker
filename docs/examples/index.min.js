"use strict";function e(e,t){var n=new Date(e.getTime());return n.setHours(0,0,0,0),n.setDate(1),n.setMonth(n.getMonth()+t),n}function t(e,t){return function e(t,n){n||(n=[]);return 7===n.length?n:(n.push(t),e(6===t?0:t+1,n))}(t).indexOf(e.getDay())}function n(e,t){var n=new Date(e.getTime());return new Date(n.setDate(n.getDate()+t))}function a(e){return new Date(e[0],e[1],e[2])}function r(e,t,n){return n||(n=[]),n.push(e),e<t&&r(e+1,t,n)||n}function i(e,t){var n=e.split(t);return n.forEach((function(e,t){e.indexOf("d")>-1&&(n[t]="day"),e.indexOf("m")>-1&&(n[t]="month"),e.indexOf("y")>-1&&(n[t]="year")})),n}function o(e){return function(t,n){return t[e.indexOf(n)]}}function d(e){return u(e,".")||u(e,"-")||u(e,"/")}function u(e,t){return e.indexOf(t)>-1?t:null}function c(e,t){var n=d(t),a=i(t,n),r=e.split(n),u=o(a);return new Date(u(r,"year"),u(r,"month")-1,u(r,"day"))}function l(e,t){var n=d(t),a=t.split(n),r=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return a.map((function(e){return e.match(/d/i)?s(o,e):e.match(/m/i)?s(i,e):e.match(/y/i)?s(r,e):void 0})).join(n)}function s(e,t){var n=(t+"").length-(e+"").length;if(0===n)return e;if(n>0)return function(e,t){for(var n=e+"",a=0;a<t;a++)n=0+n;return n}(e,n);if(n<0)throw new Error("Invalid date format")}function p(e){return a(e.value.split("$").map((function(e){return parseInt(e)})))}function m(e){return e.focus(),!0}function f(){return document.activeElement}function h(e){return document.querySelector('[data-ad-id="'+e+'"]')}function v(e){return h(""+e.getDate()+e.getMonth()+e.getFullYear())}function g(e,t,n){t.addEventListener(e,n,!0)}function w(e){return e.hasAttribute("data-day")}function y(e,t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}function D(e,t,n){var a=document.createElement("th"),r=document.createElement("button");r.type="button",r.value=t+"$"+n;var i="-1"===e?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path fill-rule="evenodd" d="M6 2L0 8l6 6V2z"></path></svg>':'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 16" width="6" height="16"><path fill-rule="evenodd" d="M0 14l6-6-6-6v12z"></path></svg>';return r.setAttribute("data-ad-id",e),r.innerHTML=i,r.addEventListener("click",(function e(t){t.stopPropagation(),r.removeEventListener("click",e),y(r,"click")})),a.appendChild(r),a}function C(e,t,n,r){return function(i,o){var d=document.createElement("td"),u=a([t,e,i]);return d.appendChild(function(e,t,n,a,r,i){var o=document.createElement("button"),d=document.createTextNode(e);return o.value=n+"$"+t+"$"+e,o.type="button",o.setAttribute("data-day",!0),o.setAttribute("data-ad-id",""+e+t+n),o.setAttribute("aria-label",r+" "+e+" "+a+" "+n),o.setAttribute("aria-disabled",!i),o.appendChild(d),o}(i,e,t,n,o,r(u))),d}}function b(e,t,n){for(var a=document.createElement("tr"),r=e,i=0;i<7;i++)a.appendChild(t(r,n.weekdays[i])),r+=1;return{el:a,day:r}}function E(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++)t.appendChild(document.createElement("td"));return t}function x(e){return e instanceof Date&&!isNaN(e)}function k(e,t,n,a){var r=t&&(x(t)&&t||c(t,a)),i=n&&(x(n)&&n||c(n,a)),o=x(e)&&e||c(e,a);return(!r||r<=o)&&(!i||i>=o)}function A(e,n,r,i){var o,d,u,c,l,s=e.getFullYear(),p=e.getMonth(),m=e.toLocaleDateString(i.locale,{month:"long"}),f=t(e,i.weekStartsOn),h=a([s,p+1,0]).getDate(),v=C(p,s,m,(o=i.minDate,d=i.maxDate,u=i.dateFormat,function(e){return k(e,o,d,u)})),g=document.createElement("table"),w=document.createElement("thead");w.appendChild(function(e,t,n,a,r){var i=document.createElement("tr"),o=document.createElement("th"),d=(a&&r?5:(a||r)&&6)||7;if(o.colSpan=d,o.appendChild(document.createTextNode(n+" "+e)),a){var u=D("-1",e,t);i.appendChild(u)}if(i.appendChild(o),r){var c=D("1",e,t);i.appendChild(c)}return i}(s,p,m,n,r)),w.appendChild((c=i.weekdays,l=document.createElement("tr"),c.forEach((function(e){var t=document.createTextNode(e),n=document.createElement("th");n.appendChild(t),l.appendChild(n)})),l)),g.appendChild(w);var y=function(e,t,n){var a=e,r=document.createElement("tr"),i=1,o=E(7-(7-e));r.appendChild(o);for(var d=a;d<7;d++)r.appendChild(t(i,n.weekdays[i])),i+=1;return{el:r,end:i}}(f,v,i);return g.appendChild(y.el),g.appendChild(function(e,t,n,a){for(var r=Math.floor((t-e+1)/7),i=e,o=document.createDocumentFragment(),d=1,u=0;u<r;u++){var c=b(i,n,a);o.appendChild(c.el),i=c.day,d+=1}var l=document.createElement("tr"),s=0;for(u=i;u<=t;u++)l.appendChild(n(i,a.weekdays[s])),i+=1,s+=1;d+=1;var p=E(7-s);for(l.appendChild(p),o.appendChild(l);d<6;){var m=document.createElement("tr");m.appendChild(E(7)),o.appendChild(m),d+=1}return o}(y.end,h,v,i)),g}function T(t,n,a){var i=r(a.monthsBeforeCurrent,a.monthsAfterCurrent).length,o=n<0?-1*i:i,d=o<0?0:i-1,u=o<0?i-1:0;return{date:e(t,o),before:-1*d,after:u}}var N={Up:-7,ArrowUp:-7,Down:7,ArrowDown:7,Left:-1,ArrowLeft:-1,Right:1,ArrowRight:1};function F(t,n,a,i,o){i=isNaN(i)?a.monthsBeforeCurrent:i,o=isNaN(o)?a.monthsAfterCurrent:o,L(t,a.id),function(t,n,a,i,o){var d=r(i,o),u=document.createElement("div");d.forEach((function(t,r){var i=void 0===d[r-1],o=void 0===d[r+1],c=e(n,t);u.appendChild(A(c,i,o,a))})),u.setAttribute("data-ad-id",a.id+"group"),u.setAttribute("data-ad-selector","datepicker-container");var c=document.createElement("div");c.setAttribute("data-ad-selector","group-container"),c.setAttribute("data-ad-id",a.id+"group-container"),c.appendChild(u),t.appendChild(c)}(t,n,a,i,o)}function L(e,t){var n=h(t+"group-container");n&&e.removeChild(n)}function S(e,t,n,a){var r=c(n,a);max=l(r,"yyyy-mm-dd"),e.setAttribute(t,r)}function B(e,t,a){var r=p(f()),i=n(r,e),o=v(i);o&&m(o)||function(e,t,n,a){var r=T(n,t>0?1:-1,a);return F(e,r.date,a,r.before,r.after),!0}(t,e,r,a)&&m(v(i))}function O(e,t,n){function r(e){e.target.hasAttribute("data-direction")&&e.preventDefault()}function i(e){t(e.target.value,!0)}function o(t){t.relatedTarget&&t.relatedTarget.getAttribute("data-ad-id")||L(t.currentTarget.parentNode,e.id)}function d(t){""!==t.target.value&&"click"!==t.type||h(e.id+"group")||(F(t.target.parentNode,n()||e.initialDate&&c(e.initialDate,e.dateFormat)||new Date,e),h(e.id+"group").scrollIntoView())}function u(n){var r=n.target,i=h(e.id+"input");w(r)&&function(n,a){var r=p(n);t(r)&&(L(a.parentNode,e.id),a.focus(),y(a,"input"))}(r,i),function(e){var t=e.getAttribute("data-ad-id");return"1"===t||"-1"===t}(r)&&function(t){var n=t.currentTarget,r=parseInt(t.target.getAttribute("data-ad-id")),i=t.target.value.split("$"),o=T(i=a([i[0],i[1],1]),r,e);F(n,o.date,e,o.before,o.after)}(n)}function l(t){var a=w(f()),r=t.key,i=N[r];!t.shiftKey||"Down"!==r&&"ArrowDown"!==r?i&&a?B(i,t.currentTarget,e):"Esc"!==r&&"Escape"!==r||(m(h(e.id+"input")),L(t.currentTarget,e.id)):function(e,t,n){var a=n||t.initialDate&&c(t.initialDate,t.dateFormat)||new Date;F(e,a,t),m(v(a))}(t.currentTarget,e,n())}this.setListeners=function(e,t){g("focus",t,d),g("click",e,u),g("keydown",e,l),g("input",t,i),g("click",t,d),g("focusout",t,o),g("mousedown",e,r)}}function M(e,t){var n=I({},e);return n=I(n,t)}function I(e,t){return Object.keys(t).forEach((function(n){e[n]=t[n]})),e}function P(e,t,n){var a=n.dateFormat;return function(r,u){var s=x(r)&&r||function(e,t){var n=d(t),a=o(i(t,n)),r=e.split(n);return 3===(r=r.map((function(e){return parseInt(e)}))).length&&(!(a(r,"month")>12||a(r,"month")<1)&&!!x(new Date(a(r,"year"),a(r,"month")-1,a(r,"day"))))}(r,a)&&c(r,a);return s&&k(s,n.minDate,n.maxDate,a)?(u||(t.value=l(s,a)),t.setCustomValidity(""),e.selectedDate=s,!0):(e.selectedDate=null,t.setCustomValidity("invalid date"),!1)}}function Y(e,t,n){return function(){var a=e.selectedDate;return n?l(a,t):a}}var $={locale:"en-EN",weekDayFormat:"short",minDate:null,maxDate:null,initialDate:null,monthsBeforeCurrent:0,monthsAfterCurrent:0,weekStartsOn:1,id:"_ad-",dateFormat:"yyyy-mm-dd",inputName:"datepicker-input",theme:"dark"},V={description:"This is a datepicker. You can type in a date using the keyboard. Use the required date format. It should be:"+$.dateFormat+" You can also use the datepicker to select a date. Press shift and arrow down to focus the datepicker. Press left arrow to move one day back. Press right arrow to move one day ahead. Press arrow up to move one week back.  Press arrow down to move one week ahead Press Space to select a date. Press Escape to close the datepicker.",notInRange:"The date is not within the intended date range.",nextGroups:"Show next months.",prevGroups:"Show previous months."};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('[data-ad-selector="datepicker-container"] {\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    z-index: 1001;\n}\n\n[data-ad-selector="group-container"] {\n    position: relative;\n}\n\n.visuallyhidden:not(:focus):not(:active) {\n    position: absolute;\n  \n    width: 1px;\n    height: 1px;\n    margin: -1px;\n    border: 0;\n    padding: 0;\n  \n    white-space: nowrap;\n  \n    clip-path: inset(100%);\n    clip: rect(0 0 0 0);\n    overflow: hidden;\n}\n\ntd:empty::after {\n    content: "\\00a0";\n  }'),module.exports=function(e,t){var r,i={selectedDate:null},o=M($,e||{});o.translations=M(V,t||{}),o.monthsBeforeCurrent=-1*o.monthsBeforeCurrent,o.weekdays=function e(t,a,r,i){return i||(i=[]),7===i.length?i:(i.push(t.toLocaleDateString(a,{weekday:r})),e(n(t,1),a,r,i))}((r=o.weekStartsOn,n(a([2014,10,9]),r)),o.locale,o.weekDayFormat);var d=document.getElementById(o.id);if(d.classList.add(o.theme),navigator.userAgent.match(/mobi/gi))!function(e,t){var n=document.createElement("input");n.type="date",t.maxDate&&S(n,"max",t.maxDate,t.dateFormat),t.minDate&&S(n,"min",t.minDate,t.dateFormat),e.appendChild(n)}(d,o);else{var u=function(e,t){var n=document.createElement("p");n.appendChild(document.createTextNode(t.translations.description)),n.classList.add("visuallyhidden"),n.id=t.id+"description",e.appendChild(n);var a=document.createElement("input");return a.setAttribute("aria-describedby",t.id+"description"),a.type="text",a.setAttribute("data-ad-id",t.id+"input"),a.setAttribute("name",t.inputName),e.appendChild(a),a}(d,o),c=P(i,u,o),l=Y(i,o.dateFormat),s=Y(i,o.dateFormat,!0);new O(o,c,l).setListeners(d,u)}return{setDate:c,getDate:l,getDateString:s}};
